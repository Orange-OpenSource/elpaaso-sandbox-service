language: bash
sudo: required
services:
  - docker
before_install:
  - git config user.name "$GH_USER"
  - git config user.email "$GH_USER_EMAIL"
  # setup https authentication credentials, used by ./mvnw release:prepare
  - git config credential.helper "store --file=.git/credentials"
  - echo "https://$GH_TOKEN:@github.com" > .git/credentials
  - git config --global push.default simple
script:
  - chmod ugo+x bin/*.sh
  - '[ "${TRAVIS_PULL_REQUEST}" = "false" ] && docker run -it -v $(pwd):/root/sources -e BINTRAY_USER -e BINTRAY_PASSWORD -e COVERALLS_TOKEN -e TRAVIS_BRANCH -e TRAVIS_TAG -e TRAVIS_PULL_REQUEST -e TRAVIS_BUILD_NUMBER -e TRAVIS_REPO_SLUG -w /root/sources maven:${MAVEN_DOCKER_VERSION}-jdk-8 bin/build.sh || true'
  - '[ "${TRAVIS_PULL_REQUEST}" != "false" ] && docker run -it -v $(pwd):/root/sources -w /root/sources maven:${MAVEN_DOCKER_VERSION}-jdk-8 mvn clean verify --settings settings.xml || true'
branches:
  except:
    # ignore branch starting with release-candidate
    - /^release-candidate.*$/
after_success:
  - bin/release.sh
env:
  global:
  - MAVEN_DOCKER_VERSION=3.3.3
  - secure: LPK1h9YNRxumcV1v2OMD22trbO2r6Ka3KDqRdQgOgiD+Boz3oDU6FsCTYIif8OdUmySrbueDOM4/0mNdUO3fOhdypnKZ4b01Y+45EzHwP9KkJmmzRqE0qtHtLv/7yifs7jz1rcRsqBDAJAmcj+TiuuuH/vnufShPoWiezkD4UO5Gt0axKNOFJ0zaqWb7XE9nU8W+l+iIRJtwvvc5YBnYspmIiSsYMAgmB/klIrKJxDNDL6nGFVj9sqwQfOiUA+E8BrdT2WBMUcGjaZcmuCYyOoaFi/ot+g/pQz98X9n046n1WE/IShCM2Y8jCwt3dQmUWFcFPa/H25/Ny9FqmaqhhL7fEEyJVqhPlZazzywcN7HI4+Pizi18qDAvXkuAc8ljFbFEO5VUdWw8k6YBCULRxPAddIdF/M/elnXpsfLL4mOYam3C/d6brSe0DPK4eMbxouCDE5riSaf1K9hocTqBYenkDfdzFKdBRdBI37LhMJh6wKNkUpV8OqRL4gk5UJRmNZHwcVRc77i5B8g9QT3aqm3eQNwqEA6IiE/J+qL5Nca2ozX4t8Zv3xTtmGPAJePybHFmdrRJzxiMtQE5ze1yRsMtXxfbO8KLjHv8572xBrS0k6fDwLvPsjcc/kLOaapYSTMolxLHE2sHk7VEwuFykt8m/eWkmwfQL+LU0Tr3fYo=
  - secure: Zfv9GSRqsGmILlgy4E3zy2PPY08cMKBBsXQdxqTJTzOS/Dqentsk2BSD7984QqA8yqb0NDQMBZcCf4VV44R0wfgKjUPkDW/PEUOAKLiqEH/0z+F/ydsPupgXYKBfTtNI5cv/4jkK1gQELQk0XCDo75aMBFXwMFDL485NrCR+2ZNpAl/8zgfBNRPROf00ElKDL0Wh9f5JK9fPAZmFh5XfTDUwgVMasYhf+n0sovm0Nt1qhTAJB4jMAHNluwI07PpJnorxg3mIJlCNn0BgLMZZNzvPH5X+3SxPx7fOih+hK+7X6P1V/2aQ43Dic6oYjriQ7EzC/EgtDFQ3U/IA9owTEBddHH8K9de18n4//Uo4JS41aFmyqKDeO3GDHZArRy7u3X9Ni85g6hbVcr8ZUKQaD6ImjUAS0j8E8+E6ylBQKw+TU5CqBhF40uT0q+qaX0PqhEoXKB0IRT9Z+J8vL69yKYmTiZ5cZA62wBw8zHAyAmVhSTemwUAvuiq509hkgJ24tSYPhoq+pJireb26dpQmhJSZnHm3PDLAyga+qY7v/L3XwUIB+PzIQazQXt4lZE9UB8rSTG9R6MFGnOLBl7dhstmrLnr5GGRdNO1vUcWhIKFh09UrCr0oshmtFEPrnIg2hKMHIV5Pgh/jHsJdPiU0a7JwAIxz8B4ooWFqEEB/ebM=
  - secure: WC1hz782iTfl0k2JAZuoiPo71WLb6xjqMpK+ajxqUshoQFRaFSPOJbGkWrxloyZXdeRiOKOM5XDGNnl4UtC9zf+XYy1bTVZ3AlxNFR0mGoqf2suEJQ6iyVMEQ803kW1lXzst57I2+8pAES5NsbmVK5kbVxJOWcAJoezLm006mGW4cBRWBK8sqFsv44kmoolookBgYUDmKtGzgRKU+198J/I634IDT9QTmo/omnuSNlvIwzFPcv1AvBzTrJW3z6iPj53KwZhofoTWJO10/+/OpOAJs/f5s7YcZnDyvNsjBNBcx8Dpgdc0+KXEv46CnLDCcjt8eHUF0mW595JniioE3k6EPKZKazrGcLRe6HodVE5FdhGy8/m3I2uKS4ZHBnZWDNpejq/dw3mICPwgwawIRg9pAdY5ZTbpr09sGidbPH97Qg60kunM6+VJEcfJZVAlFKLsY/I+vkpQSFttvu4rm37P6mR3qmvyDcjL99VqyzLLWnwKYj2pUPiRHQfqaYaeBcBIFMORjdkVIZkq+ag3tGmzTYhnOHSvDr1j+9G53skrEPsem+EU/mwXLhMlagsxJLXUJcZfV/ovZh41PZlo2DsT+SafD4Sd0u7QlRm7ClqAHFMvFP0NrIJPBvuAjDqS/7wvgZRZW2PDX+qc8PfOVfbRTiCzvoze2qo0OvFAzco=
  - secure: 2BWiE1p+2OPdIIRl6szyEfP9xNVsJAsp/D8CXaexWc8qe4vNdNzZXOJGU3UynRNMZainZhuSGJJAZmNNYwzt+JXvCc2TbPKjRLaNfNR/6KlzYJXvH9AWu1TvGKXQg0zucd0sTGSEMqO5SzGUDOqbxOr6dqsobN994H9leeu6qzAGgNIV1B/P6b4DALn1NRlaXOi+Bs2DhrKhm6QRNFwC/2iXtu9ZSSXTmTAe5Ps8q/wv4CQrILYSUFSI2k+MpM2CiE7KjoMc7+tWx/4Lw3tAHbA716PGWvvfAjE7lIyd7GvmtorJHR5Lzk/y7R2UrxjS6n5NF68MzxjA/luJQeRkYU3zufLOBaD9T5gJtqKAi2CON0mDlfMNdIKcMQyXUJT97pGcPeVXp9KDYs0F1TgBNSGVMwYzFDV44Vs8YSN/WGC0O5Awz8FM3rtnE+YGltzqPHma+2bNL1QpUweyyiPbWFeihNAHu6JmIUvNAlXBd41BXSa7ohS86pEYE7KCzciMF+imS0NaD4n0i5ZfvrQIMoNU1SlnNFA+Dn8w3xoIcdgpyz9yGntAG67udN6hO1bjjSZ8a1VwO8ctxizgwDCsWLSX0dWylNoTRDW9BKfiO52wojoaH5WVfrEYvaIyAe2OpTGvlRW04DvN2IlsoAFNJ0vCUVKL04++5lbFTlqCR0I=
  - secure: nPXR+zbBxJW0dwrd76h4d2NgtDi3hbONXp+2T05BkuMVC1hupY1q0Mp7Cl6DAySmAKKsXD3maHxnIzbrLqM4wDBtk6hsDeCIOKvJyQAsSnHlq/l92HXAtGekMOjr5FQKa5tN1rq4AcxZItLxz+QAaR+XkfKGX9w2MoK67sKpwInbDHQGu302HP/1ApMLqaBNSP5YBPOQ6GUzmuqbnEjks6K0ealfp0L7uRoG5OjOUrMtm8HAjx6xLT7yFfd4xRgpq1hoLaqZXCY8EsxE1K596UXSLVAxT4KeQVyBGeOf/39hl0ic1M/8pXJiE9Ci8r/R5ujf2sq5dTr3M/qaate9zfbwqFGZnHrKGEoBZ8YFtApAoqXQnCx3jfmARm8i9VO5gY0rCTUWguDtXPJb52KYOXeTbkuyuEh1xyB9OTVGStZP085EMVfHWT4sa3u/tL0dEZ+0ZZ4njocCmVE4mdXxkw9vnpMPkcN9DGMqb9yGc3yiatRIEeV0dXaCJWpKBRpKS64JoD+/jPtVT4hdhFSgstFh7BmZpoPlApE7TOFipxLu4oRT/SOrmDpWLuTOwu4s2BCpQZbe074j566Ag9q2cl2IiSHZtowpZIqFxqZlhY4mNlDAkHyJuOa0/JvXrT5PYuJ8W8JUnf2DD3HMh+MhGRvVuxxFajY/fr15qybGB/s=
  - secure: blN0trxV+zzS0HRZd6/ts0pDUvjXsFZckULUtwsCHPvr+iyFp+drLmTvLN6fcxpA47C9szBfkBk5URkWiAI9pUlH36dt2yXhQ+R9G9IpcFDXhpXy+LgC9W/41l9IdzfNGdeeYwbonwW3nEjo/vtnUkfTBIZtzBkat23yOUk317T/4iYluNP1ulLhctp/cZJSvu2hMK+2TvjXWMJ31IUbKCZrCSKTXIwfNTQ8bCOfwYdDFLXprduweW0l1C8FRQPmVkne8QvuI18IlIF/+oAnqH2PZGtN3RiI0CBJUMIq3BbhrEcfrfUMrUeX6A+jbuXBqKR50m/+lsVWZSty7BUzFvY/rEO66/rmBA1hpiVEm+kNWkS6IJbg08AFFTPb3HahlCjmqCHJ55COCKNLGBkcdZyh2dNpYlKfUTCVgQqkCe6w5ar57DwTP56w48QijxeeHVKGd3QfnF1mElB227wy4I/+dW5kGCLO0eX7Hb6Du28gkiBUoqh+2EY4vpDFi16a55eGH+ydWQbRL9xohgVmFEuTHJfix4Tg0Bto/lJRnCVjMnz0YAZZGDOKJgM1HzlqDmoG34rfTcqYwl/PrXX55pDOhZzKpzUQns0nuBBfNec6UkOZ8zQiXSlj/UWCmDWwDMjWShUyeniIUgaNpMRms6bholuUkICoc4pnX4icoQY=
